<app-buyer-navbar></app-buyer-navbar>

<div class="clearheader"></div>

<!--
Bryan Vu contributed most of this buyer portal page.
-->

<div class="container-fluid" *ngIf="buyer">
  &nbsp;
  <div class="container">
    <div class="row justify-content-md">
      <div>
        <h4 class="page-header">Welcome {{buyer.data.first_name}}</h4>

        <button type="button" routerLink="/buyer/make-request" class="btn btn-block" style="background-color: #1761a0; color: white">Submit
          New Request</button>
      </div>
    </div>

    <br>

    <div class="row justify-content-md" ng-cloak>
      <div class="col">
        <h3>{{buyer.data.first_name}}'s Requests</h3>
      </div>
      <div class="input-group col searchBox">
        <input type="text" class="form-control" placeholder="Search Requests" [(ngModel)]="filter">

      </div>
    </div>
  </div>
  &nbsp;
  <li class="card container">
    &nbsp;
    <table class="table table-striped table-sm" style="background-color: #282d32; color: white">
      <thead>
        <tr style="text-align:center">
          <th>Name</th>
          <th style="width: 300px;">Status</th>
          <th style="width: 300px;">Offers</th>
          <th style="width: 300px;">Time Left</th>
        </tr>
      </thead>
    </table>

    <mat-accordion>
      <mat-expansion-panel id="requestExpansionId" (opened)="expanded()" *ngFor="let request of requestList">
        <mat-expansion-panel-header style="text-align:center">
          <mat-panel-title style="width: 180px">
            {{request.title}}
          </mat-panel-title>
          <mat-panel-title style="width:200px">
            Active
          </mat-panel-title>
          <mat-panel-title style="width: 75px">
            {{request.offerCount}}
          </mat-panel-title>
          <mat-panel-title style="width: 90px">
            {{request.deadline}}
          </mat-panel-title>
        </mat-expansion-panel-header>

        <div class="container" style="border:3px solid black">
          &nbsp;
          <mat-panel-title>
            Description:
          </mat-panel-title>
          <mat-panel-title>
            {{request.description}}
          </mat-panel-title>
          <br>
          <table class="table table-striped table-sm" style="background-color: #487eb0; color: white">
            <thead>
              <tr style="text-align:center">
                <th>Offer</th>
                <th style="width: 300px;">Title</th>
                <th style="width: 300px;">Submission Date</th>
                <th style="width: 300px;">Price</th>
              </tr>
            </thead>
          </table>

          <mat-expansion-panel >
            <mat-expansion-panel-header style="text-align:center">
              <mat-panel-title style="width: 100px">
                #
              </mat-panel-title>
              <mat-panel-title style="width: 200px">
                  offer-title
                </mat-panel-title>
                <mat-panel-title style="width: 200px">
                    offer-sub-date
                  </mat-panel-title>
                  <mat-panel-title style="width: 50px">
                      offer-price
                    </mat-panel-title>
            </mat-expansion-panel-header>
          </mat-expansion-panel>
          &nbsp;
        </div>

        <!----
        <mat-form-field>
          <input matInput placeholder="Age">
        </mat-form-field>-->
      </mat-expansion-panel>
    </mat-accordion>



    &nbsp;

    <!----
    <div class="row">
      <div class="col-md-auto">
        <h4>{{request.title}}</h4>
      </div>
      <div class="col">
        <p><b>Offer count:</b> {{request.offerCount}}</p>
      </div>
    </div>

    <p><b>Deadline:</b> {{request.deadline}}</p>
    <p><b>Description:</b> {{request.description}}</p>
    <div class="col-sm-12" style="text-align: right;">
      <button type="button" routerLink="/request/{{request._id}}" class="btn">View Offers</button>
    </div>
    <br>-->
  </li>
</div>

<div class="clearfooter"></div>